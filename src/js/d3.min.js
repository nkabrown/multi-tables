!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.d3={})}(this,function(n){"use strict";function t(n){var t=n+="",e=t.indexOf(":");return e>=0&&"xmlns"!==(t=n.slice(0,e))&&(n=n.slice(e+1)),An.hasOwnProperty(t)?{space:An[t],local:n}:n}function e(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===wn&&t.documentElement.namespaceURI===wn?t.createElement(n):t.createElementNS(e,n)}}function r(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function i(n){var i=t(n);return(i.local?r:e)(i)}function o(n,t,e){return n=u(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function u(n,t,e){return function(r){var i=Tn;Tn=r;try{n.call(this,this.__data__,t,e)}finally{Tn=i}}}function l(n){return n.trim().split(/^|\s+/).map(function(n){var t="",e=n.indexOf(".");return e>=0&&(t=n.slice(e+1),n=n.slice(0,e)),{type:n,name:t}})}function s(n){return function(){var t=this.__on;if(t){for(var e,r=0,i=-1,o=t.length;r<o;++r)e=t[r],n.type&&e.type!==n.type||e.name!==n.name?t[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?t.length=i:delete this.__on}}}function c(n,t,e){var r=Cn.hasOwnProperty(n.type)?o:u;return function(i,o,u){var l,s=this.__on,c=r(t,o,u);if(s)for(var a=0,f=s.length;a<f;++a)if((l=s[a]).type===n.type&&l.name===n.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=e),void(l.value=t);this.addEventListener(n.type,c,e),l={type:n.type,name:n.name,value:t,listener:c,capture:e},s?s.push(l):this.__on=[l]}}function a(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function f(n,t,e){var r=a(n),i=r.CustomEvent;"function"==typeof i?i=new i(t,e):(i=r.document.createEvent("Event"),e?(i.initEvent(t,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(t,!1,!1)),n.dispatchEvent(i)}function h(n,t){return function(){return f(this,n,t)}}function p(n,t){return function(){return f(this,n,t.apply(this,arguments))}}function v(){var n=this.parentNode;n&&n.removeChild(this)}function d(){}function y(n){return null==n?d:function(){return this.querySelector(n)}}function m(){return null}function _(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function g(){this.nextSibling&&this.parentNode.appendChild(this)}function w(){this.innerHTML=""}function A(n){return function(){this.innerHTML=n}}function x(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}function b(){this.textContent=""}function E(n){return function(){this.textContent=n}}function S(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}function C(n){return n.trim().split(/^|\s+/)}function T(n){return n.classList||new N(n)}function N(n){this._node=n,this._names=C(n.getAttribute("class")||"")}function O(n,t){for(var e=T(n),r=-1,i=t.length;++r<i;)e.add(t[r])}function k(n,t){for(var e=T(n),r=-1,i=t.length;++r<i;)e.remove(t[r])}function q(n){return function(){O(this,n)}}function M(n){return function(){k(this,n)}}function P(n,t){return function(){(t.apply(this,arguments)?O:k)(this,n)}}function L(n){return function(){delete this[n]}}function R(n,t){return function(){this[n]=t}}function $(n,t){return function(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}}function j(n){return function(){this.style.removeProperty(n)}}function D(n,t,e){return function(){this.style.setProperty(n,t,e)}}function H(n,t,e){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}}function B(n,t){return n.style.getPropertyValue(t)||a(n).getComputedStyle(n,null).getPropertyValue(t)}function z(n){return function(){this.removeAttribute(n)}}function I(n){return function(){this.removeAttributeNS(n.space,n.local)}}function U(n,t){return function(){this.setAttribute(n,t)}}function V(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function X(n,t){return function(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}function F(n,t){return function(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function G(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function J(n){return new Array(n.length)}function K(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}function Q(n){return function(){return n}}function W(n,t,e,r,i,o){for(var u,l=0,s=t.length,c=o.length;l<c;++l)(u=t[l])?(u.__data__=o[l],r[l]=u):e[l]=new K(n,o[l]);for(;l<s;++l)(u=t[l])&&(i[l]=u)}function Y(n,t,e,r,i,o,u){var l,s,c,a={},f=t.length,h=o.length,p=new Array(f);for(l=0;l<f;++l)(s=t[l])&&(p[l]=c=Nn+u.call(s,s.__data__,l,t),c in a?i[l]=s:a[c]=s);for(l=0;l<h;++l)(s=a[c=Nn+u.call(n,o[l],l,o)])?(r[l]=s,s.__data__=o[l],a[c]=null):e[l]=new K(n,o[l]);for(l=0;l<f;++l)(s=t[l])&&a[p[l]]===s&&(i[l]=s)}function Z(){return[]}function nn(n){return null==n?Z:function(){return this.querySelectorAll(n)}}function tn(n,t){this._groups=n,this._parents=t}function en(){}function rn(n,t){var e=new en;if(n instanceof en)n.each(function(n,t){e.set(t,n)});else if(Array.isArray(n)){var r,i=-1,o=n.length;if(null==t)for(;++i<o;)e.set(i,n[i]);else for(;++i<o;)e.set(t(r=n[i],i,n),r)}else if(n)for(var u in n)e.set(u,n[u]);return e}function on(){for(var n,t=0,e=arguments.length,r={};t<e;++t){if(!(n=arguments[t]+"")||n in r)throw new Error("illegal type: "+n);r[n]=[]}return new un(r)}function un(n){this._=n}function ln(n,t){return n.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");if(r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:e}})}function sn(n,t){for(var e,r=0,i=n.length;r<i;++r)if((e=n[r]).name===t)return e.value}function cn(n,t,e){for(var r=0,i=n.length;r<i;++r)if(n[r].name===t){n[r]=kn,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=e&&n.push({name:t,value:e}),n}function an(n,t){function e(n){var t,e=c.status;if(!e&&hn(c)||e>=200&&e<300||304===e){if(o)try{t=o.call(r,c)}catch(n){return void l.call("error",r,n)}else t=c;l.call("load",r,t)}else l.call("error",r,n)}var r,i,o,u,l=on("beforesend","progress","load","error"),s=rn(),c=new XMLHttpRequest,a=null,f=null,h=0;if("undefined"==typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=e:c.onreadystatechange=function(n){c.readyState>3&&e(n)},c.onprogress=function(n){l.call("progress",r,n)},r={header:function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?s.get(n):(null==t?s.remove(n):s.set(n,t+""),r)},mimeType:function(n){return arguments.length?(i=null==n?null:n+"",r):i},responseType:function(n){return arguments.length?(u=n,r):u},timeout:function(n){return arguments.length?(h=+n,r):h},user:function(n){return arguments.length<1?a:(a=null==n?null:n+"",r)},password:function(n){return arguments.length<1?f:(f=null==n?null:n+"",r)},response:function(n){return o=n,r},get:function(n,t){return r.send("GET",n,t)},post:function(n,t){return r.send("POST",n,t)},send:function(t,e,o){return c.open(t,n,!0,a,f),null==i||s.has("accept")||s.set("accept",i+",*/*"),c.setRequestHeader&&s.each(function(n,t){c.setRequestHeader(t,n)}),null!=i&&c.overrideMimeType&&c.overrideMimeType(i),null!=u&&(c.responseType=u),h>0&&(c.timeout=h),null==o&&"function"==typeof e&&(o=e,e=null),null!=o&&1===o.length&&(o=fn(o)),null!=o&&r.on("error",o).on("load",function(n){o(null,n)}),l.call("beforesend",r,c),c.send(null==e?null:e),r},abort:function(){return c.abort(),r},on:function(){var n=l.on.apply(l,arguments);return n===l?r:n}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return r.get(t)}return r}function fn(n){return function(t,e){n(null==t?e:null)}}function hn(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function pn(n){return new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}")}function vn(n,t){var e=pn(n);return function(r,i){return t(e(r),i,n)}}function dn(n){var t=Object.create(null),e=[];return n.forEach(function(n){for(var r in n)r in t||e.push(t[r]=r)}),e}function yn(n){function t(n,t){function e(){if(a>=c)return l;if(i)return i=!1,u;var t,e=a;if(34===n.charCodeAt(e)){for(var r=e;r++<c;)if(34===n.charCodeAt(r)){if(34!==n.charCodeAt(r+1))break;++r}return a=r+2,13===(t=n.charCodeAt(r+1))?(i=!0,10===n.charCodeAt(r+2)&&++a):10===t&&(i=!0),n.slice(e+1,r).replace(/""/g,'"')}for(;a<c;){var s=1;if(10===(t=n.charCodeAt(a++)))i=!0;else if(13===t)i=!0,10===n.charCodeAt(a)&&(++a,++s);else if(t!==o)continue;return n.slice(e,a-s)}return n.slice(e)}for(var r,i,u={},l={},s=[],c=n.length,a=0,f=0;(r=e())!==l;){for(var h=[];r!==u&&r!==l;)h.push(r),r=e();t&&null==(h=t(h,f++))||s.push(h)}return s}function e(t){return t.map(r).join(n)}function r(n){return null==n?"":i.test(n+="")?'"'+n.replace(/\"/g,'""')+'"':n}var i=new RegExp('["'+n+"\n\r]"),o=n.charCodeAt(0);return{parse:function(n,e){var r,i,o=t(n,function(n,t){if(r)return r(n,t-1);i=n,r=e?vn(n,e):pn(n)});return o.columns=i,o},parseRows:t,format:function(t,e){return null==e&&(e=dn(t)),[e.map(r).join(n)].concat(t.map(function(t){return e.map(function(n){return r(t[n])}).join(n)})).join("\n")},formatRows:function(n){return n.map(e).join("\n")}}}function mn(n,t){return function(e){return n(e.responseText,t)}}function _n(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function gn(n){return function(t,e){return _n(n(t),e)}}var wn="http://www.w3.org/1999/xhtml",An={svg:"http://www.w3.org/2000/svg",xhtml:wn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xn=function(n){return function(){return this.matches(n)}};if("undefined"!=typeof document){var bn=document.documentElement;if(!bn.matches){var En=bn.webkitMatchesSelector||bn.msMatchesSelector||bn.mozMatchesSelector||bn.oMatchesSelector;xn=function(n){return function(){return En.call(this,n)}}}}var Sn=xn,Cn={},Tn=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Cn={mouseenter:"mouseover",mouseleave:"mouseout"})),N.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}},K.prototype={constructor:K,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var Nn="$",On=[null];tn.prototype=function(){return new tn([[document.documentElement]],On)}.prototype={constructor:tn,select:function(n){"function"!=typeof n&&(n=y(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o,u,l=t[i],s=l.length,c=r[i]=new Array(s),a=0;a<s;++a)(o=l[a])&&(u=n.call(o,o.__data__,a,l))&&("__data__"in o&&(u.__data__=o.__data__),c[a]=u);return new tn(r,this._parents)},selectAll:function(n){"function"!=typeof n&&(n=nn(n));for(var t=this._groups,e=t.length,r=[],i=[],o=0;o<e;++o)for(var u,l=t[o],s=l.length,c=0;c<s;++c)(u=l[c])&&(r.push(n.call(u,u.__data__,c,l)),i.push(u));return new tn(r,i)},filter:function(n){"function"!=typeof n&&(n=Sn(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o,u=t[i],l=u.length,s=r[i]=[],c=0;c<l;++c)(o=u[c])&&n.call(o,o.__data__,c,u)&&s.push(o);return new tn(r,this._parents)},data:function(n,t){if(!n)return p=new Array(this.size()),c=-1,this.each(function(n){p[++c]=n}),p;var e=t?Y:W,r=this._parents,i=this._groups;"function"!=typeof n&&(n=Q(n));for(var o=i.length,u=new Array(o),l=new Array(o),s=new Array(o),c=0;c<o;++c){var a=r[c],f=i[c],h=f.length,p=n.call(a,a&&a.__data__,c,r),v=p.length,d=l[c]=new Array(v),y=u[c]=new Array(v);e(a,f,d,y,s[c]=new Array(h),p,t);for(var m,_,g=0,w=0;g<v;++g)if(m=d[g]){for(g>=w&&(w=g+1);!(_=y[w])&&++w<v;);m._next=_||null}}return u=new tn(u,r),u._enter=l,u._exit=s,u},enter:function(){return new tn(this._enter||this._groups.map(J),this._parents)},exit:function(){return new tn(this._exit||this._groups.map(J),this._parents)},merge:function(n){for(var t=this._groups,e=n._groups,r=t.length,i=e.length,o=Math.min(r,i),u=new Array(r),l=0;l<o;++l)for(var s,c=t[l],a=e[l],f=c.length,h=u[l]=new Array(f),p=0;p<f;++p)(s=c[p]||a[p])&&(h[p]=s);for(;l<r;++l)u[l]=t[l];return new tn(u,this._parents)},order:function(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var r,i=n[t],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(n){n||(n=G);for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i){for(var o,u=t[i],l=u.length,s=r[i]=new Array(l),c=0;c<l;++c)(o=u[c])&&(s[c]=o);s.sort(function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e})}return new tn(r,this._parents).order()},call:function(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function(){var n=new Array(this.size()),t=-1;return this.each(function(){n[++t]=this}),n},node:function(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var r=n[t],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var n=0;return this.each(function(){++n}),n},empty:function(){return!this.node()},each:function(n){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i,o=t[e],u=0,l=o.length;u<l;++u)(i=o[u])&&n.call(i,i.__data__,u,o);return this},attr:function(n,e){var r=t(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==e?r.local?I:z:"function"==typeof e?r.local?F:X:r.local?V:U)(r,e))},style:function(n,t,e){return arguments.length>1?this.each((null==t?j:"function"==typeof t?H:D)(n,t,null==e?"":e)):B(this.node(),n)},property:function(n,t){return arguments.length>1?this.each((null==t?L:"function"==typeof t?$:R)(n,t)):this.node()[n]},classed:function(n,t){var e=C(n+"");if(arguments.length<2){for(var r=T(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof t?P:t?q:M)(e,t))},text:function(n){return arguments.length?this.each(null==n?b:("function"==typeof n?S:E)(n)):this.node().textContent},html:function(n){return arguments.length?this.each(null==n?w:("function"==typeof n?x:A)(n)):this.node().innerHTML},raise:function(){return this.each(g)},lower:function(){return this.each(_)},append:function(n){var t="function"==typeof n?n:i(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(n,t){var e="function"==typeof n?n:i(n),r=null==t?m:"function"==typeof t?t:y(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(v)},datum:function(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function(n,t,e){var r,i,o=l(n+""),u=o.length;{if(!(arguments.length<2)){for(a=t?c:s,null==e&&(e=!1),r=0;r<u;++r)this.each(a(o[r],t,e));return this}var a=this.node().__on;if(a)for(var f,h=0,p=a.length;h<p;++h)for(r=0,f=a[h];r<u;++r)if((i=o[r]).type===f.type&&i.name===f.name)return f.value}},dispatch:function(n,t){return this.each(("function"==typeof t?p:h)(n,t))}};en.prototype=rn.prototype={constructor:en,has:function(n){return"$"+n in this},get:function(n){return this["$"+n]},set:function(n,t){return this["$"+n]=t,this},remove:function(n){var t="$"+n;return t in this&&delete this[t]},clear:function(){for(var n in this)"$"===n[0]&&delete this[n]},keys:function(){var n=[];for(var t in this)"$"===t[0]&&n.push(t.slice(1));return n},values:function(){var n=[];for(var t in this)"$"===t[0]&&n.push(this[t]);return n},entries:function(){var n=[];for(var t in this)"$"===t[0]&&n.push({key:t.slice(1),value:this[t]});return n},size:function(){var n=0;for(var t in this)"$"===t[0]&&++n;return n},empty:function(){for(var n in this)if("$"===n[0])return!1;return!0},each:function(n){for(var t in this)"$"===t[0]&&n(this[t],t.slice(1),this)}};rn.prototype;var kn={value:function(){}};un.prototype=on.prototype={constructor:un,on:function(n,t){var e,r=this._,i=ln(n+"",r),o=-1,u=i.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<u;)if(e=(n=i[o]).type)r[e]=cn(r[e],n.name,t);else if(null==t)for(e in r)r[e]=cn(r[e],n.name,null);return this}for(;++o<u;)if((e=(n=i[o]).type)&&(e=sn(r[e],n.name)))return e}},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new un(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=0,e=(r=this._[n]).length;o<e;++o)r[o].value.apply(t,i)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(t,e)}};var qn=function(n,t){return function(e,r){var i=an(e).mimeType(n).response(t);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}}("text/plain",function(n){return n.responseText}),Mn=yn(",").parse,Pn=(yn("\t"),function(n,t){return function(e,r,i){arguments.length<3&&(i=r,r=null);var o=an(e).mimeType(n);return o.row=function(n){return arguments.length?o.response(mn(t,r=n)):r},o.row(r),i?o.get(i):o}}("text/csv",Mn));!function(n){1===n.length&&(n=gn(n))}(_n);n.select=function(n){return"string"==typeof n?new tn([[document.querySelector(n)]],[document.documentElement]):new tn([[n]],On)},n.selectAll=function(n){return"string"==typeof n?new tn([document.querySelectorAll(n)],[document.documentElement]):new tn([null==n?[]:n],On)},n.csv=Pn,n.text=qn,n.max=function(n,t){var e,r,i=n.length,o=-1;if(null==t){for(;++o<i;)if(null!=(e=n[o])&&e>=e)for(r=e;++o<i;)null!=(e=n[o])&&e>r&&(r=e)}else for(;++o<i;)if(null!=(e=t(n[o],o,n))&&e>=e)for(r=e;++o<i;)null!=(e=t(n[o],o,n))&&e>r&&(r=e);return r},n.min=function(n,t){var e,r,i=n.length,o=-1;if(null==t){for(;++o<i;)if(null!=(e=n[o])&&e>=e)for(r=e;++o<i;)null!=(e=n[o])&&r>e&&(r=e)}else for(;++o<i;)if(null!=(e=t(n[o],o,n))&&e>=e)for(r=e;++o<i;)null!=(e=t(n[o],o,n))&&r>e&&(r=e);return r},n.sum=function(n,t){var e,r=n.length,i=-1,o=0;if(null==t)for(;++i<r;)(e=+n[i])&&(o+=e);else for(;++i<r;)(e=+t(n[i],i,n))&&(o+=e);return o}});